{% assign image_fallback =  site.url | append: "/assets/img/default.png" %}
{% assign images = site.static_files | where: "image", true %}
{% for image in images %}
  {% assign image_name = image.basename | slugify | downcase %}
  {% assign page_name = page.slug  | downcase %}
  {% if image_name == page_name %}
    {% assign page_image = site.url | append: image.path %}
  {% endif %}
{% endfor %}
{% capture page_title %}
{% if page.title and page.title != "none" %}
    {{ page.title }}
  {% else %}
      {{ site.title }}
      {{ site.title_sep }}
      {{ site.tagline }}
  {% endif %}
{% endcapture %}
<!-- Twitter cards -->
{% if page_image %}
<meta name="twitter:card"  content="summary_large_image">
<meta name="twitter:image" content="{{ page_image }}">
<meta name="twitter:url" content="{{ site.url }}{{ page.url }}" />
{% else %}
<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="{{ image_fallback }}">
<meta name="twitter:url" content="{{ site.url }}{{ page.url }}" />
{% endif %}
<meta name="twitter:site"    content="@{{ site.twitter_username }}">
<meta name="twitter:creator" content="@{{ site.author }}">
<meta name="twitter:title"   content="{{ page_title }}">
{% if page.description %}
<meta name="twitter:description" content="{{ page.description }}">
{% else %}
<meta name="twitter:description" content="{{ site.description }}">
{% endif %}
<!-- end of Twitter cards -->
<!-- Open Graph data -->
<meta property="og:title" content="{{ page_title }}" />
<meta property="og:type" content="article" />
<meta property="og:url" content="{{ site.url }}{{ page.url }}" />
{%if page_image %}
<meta property="og:image" content="{{ page_image}}" />
{% else %}
<meta property="og:image" content="{{ image_fallback }}"/>
{%endif %}
<meta property="og:description" content="{{ page.description | default: site.description }}" />
<meta property="og:site_name" content="{{ site.title }}" />
<meta property="og:locale" content="en-US" />
{%if page.date %}
  <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}" />
{%endif %}
{%if page.modified_date %}
  <meta property="article:modified_time" content="{{ page.last_modified_at | date_to_xmlschema }}" />
{%endif %}
{%if page.tags %}
  {% for tag in page.tags %}
    <meta property="article:tag" content="{{ tag | escape }}" />
  {% endfor %}
{%endif %}
<!-- end of Open Graph data -->
